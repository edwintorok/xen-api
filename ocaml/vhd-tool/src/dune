(library
  (name channel_stubs)
  (modules channels iO)
  (foreign_stubs
    (language c)
    (names direct_copy_stubs)
  )
  (libraries cstruct io-page lwt lwt.unix lwt_ssl)
  (wrapped false)
)

(library
  (name local_lib)
  (wrapped false)
  (modules (:standard \ channels iO))
  (libraries
    astring
    bigarray-compat
    channel_stubs
    cohttp
    cohttp-lwt
    cstruct
    io-page
    lwt
    lwt.unix
    lwt_ssl
    nbd
    nbd-unix
    re.str
    result
    rpclib.core
    rpclib.json
    sha
    ssl
    tar
    uri
    vhd-format
    vhd-format-lwt
    tapctl
    xapi-stdext-std
    xapi-stdext-unix
    xenstore
    xenstore.client
    xenstore.unix
    xenstore_transport
  )
  (preprocess (pps ppx_deriving_rpc ppx_cstruct))
)

